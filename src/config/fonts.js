// Centralized font configuration for the entire website
// This file is automatically updated by the FontManager admin interface
// Components reference this file for their font styles
// Default font configuration
export const defaultFonts = {
    header: {
        p: { component: 'header', elementType: 'p', fontFamily: 'Inter', isActive: true },
        li: { component: 'header', elementType: 'li', fontFamily: 'Inter', isActive: true },
        button: { component: 'header', elementType: 'button', fontFamily: 'Inter', isActive: true }
    },
    hero: {
        h1: { component: 'hero', elementType: 'h1', fontFamily: 'Inter', isActive: true },
        p: { component: 'hero', elementType: 'p', fontFamily: 'Inter', isActive: true },
        button: { component: 'hero', elementType: 'button', fontFamily: 'Inter', isActive: true },
        highlighted: { component: 'hero', elementType: 'highlighted', fontFamily: 'Source Code Pro', isActive: true }
    },
    logo: {
        p: { component: 'logo', elementType: 'p', fontFamily: 'Inter', isActive: true },
        highlighted: { component: 'logo', elementType: 'highlighted', fontFamily: 'Source Code Pro', isActive: true }
    },
    valueProp: {
        h2: { component: 'valueProp', elementType: 'h2', fontFamily: 'Inter', isActive: true },
        h3: { component: 'valueProp', elementType: 'h3', fontFamily: 'Inter', isActive: true },
        p: { component: 'valueProp', elementType: 'p', fontFamily: 'Inter', isActive: true },
        highlighted: { component: 'valueProp', elementType: 'highlighted', fontFamily: 'Source Code Pro', isActive: true }
    },
    valueStick: {
        p: { component: 'valueStick', elementType: 'p', fontFamily: 'Inter', isActive: true },
        highlighted: { component: 'valueStick', elementType: 'highlighted', fontFamily: 'Source Code Pro', isActive: true }
    },
    imageLibrary: {
        h2: { component: 'imageLibrary', elementType: 'h2', fontFamily: 'Inter', isActive: true },
        h3: { component: 'imageLibrary', elementType: 'h3', fontFamily: 'Inter', isActive: true },
        p: { component: 'imageLibrary', elementType: 'p', fontFamily: 'Inter', isActive: true },
        pill: { component: 'imageLibrary', elementType: 'pill', fontFamily: 'Inter', isActive: true },
        highlighted: { component: 'imageLibrary', elementType: 'highlighted', fontFamily: 'Source Code Pro', isActive: true }
    },
    metrics: {
        h2: { component: 'metrics', elementType: 'h2', fontFamily: 'Inter', isActive: true }
    },
    tubeMap: {
        h3: { component: 'tubeMap', elementType: 'h3', fontFamily: 'Inter', isActive: true },
        highlighted: { component: 'tubeMap', elementType: 'highlighted', fontFamily: 'Source Code Pro', isActive: true }
    },
    about: {
        h2: { component: 'about', elementType: 'h2', fontFamily: 'Inter', isActive: true },
        h3: { component: 'about', elementType: 'h3', fontFamily: 'Inter', isActive: true },
        p: { component: 'about', elementType: 'p', fontFamily: 'Inter', isActive: true },
        highlighted: { component: 'about', elementType: 'highlighted', fontFamily: 'Source Code Pro', isActive: true }
    },
    contact: {
        h2: { component: 'contact', elementType: 'h2', fontFamily: 'Inter', isActive: true },
        p: { component: 'contact', elementType: 'p', fontFamily: 'Inter', isActive: true },
        button: { component: 'contact', elementType: 'button', fontFamily: 'Inter', isActive: true },
        highlighted: { component: 'contact', elementType: 'highlighted', fontFamily: 'Source Code Pro', isActive: true }
    },
    contactModal: {
        h2: { component: 'contactModal', elementType: 'h2', fontFamily: 'Inter', isActive: true },
        h3: { component: 'contactModal', elementType: 'h3', fontFamily: 'Inter', isActive: true },
        p: { component: 'contactModal', elementType: 'p', fontFamily: 'Inter', isActive: true },
        label: { component: 'contactModal', elementType: 'label', fontFamily: 'Inter', isActive: true },
        button: { component: 'contactModal', elementType: 'button', fontFamily: 'Inter', isActive: true },
        formField: { component: 'contactModal', elementType: 'formField', fontFamily: 'Inter', isActive: true },
        highlighted: { component: 'contactModal', elementType: 'highlighted', fontFamily: 'Source Code Pro', isActive: true }
    },
    footer: {
        p: { component: 'footer', elementType: 'p', fontFamily: 'Inter', isActive: true },
        li: { component: 'footer', elementType: 'li', fontFamily: 'Inter', isActive: true },
        button: { component: 'footer', elementType: 'button', fontFamily: 'Inter', isActive: true },
        highlighted: { component: 'footer', elementType: 'highlighted', fontFamily: 'Source Code Pro', isActive: true }
    },
    blog: {
        h1: { component: 'blog', elementType: 'h1', fontFamily: 'Inter', isActive: true },
        h2: { component: 'blog', elementType: 'h2', fontFamily: 'Inter', isActive: true },
        h3: { component: 'blog', elementType: 'h3', fontFamily: 'Inter', isActive: true },
        p: { component: 'blog', elementType: 'p', fontFamily: 'Inter', isActive: true },
        li: { component: 'blog', elementType: 'li', fontFamily: 'Inter', isActive: true },
        span: { component: 'blog', elementType: 'span', fontFamily: 'Inter', isActive: true },
        highlighted: { component: 'blog', elementType: 'highlighted', fontFamily: 'Source Code Pro', isActive: true }
    },
    bookClub: {
        h1: { component: 'bookClub', elementType: 'h1', fontFamily: 'Inter', isActive: true },
        h2: { component: 'bookClub', elementType: 'h2', fontFamily: 'Inter', isActive: true },
        h3: { component: 'bookClub', elementType: 'h3', fontFamily: 'Inter', isActive: true },
        p: { component: 'bookClub', elementType: 'p', fontFamily: 'Inter', isActive: true },
        highlighted: { component: 'bookClub', elementType: 'highlighted', fontFamily: 'Source Code Pro', isActive: true }
    },
    testimonials: {
        h2: { component: 'testimonials', elementType: 'h2', fontFamily: 'Inter', isActive: true },
        p: { component: 'testimonials', elementType: 'p', fontFamily: 'Inter', isActive: true },
        button: { component: 'testimonials', elementType: 'button', fontFamily: 'Inter', isActive: true },
        highlighted: { component: 'testimonials', elementType: 'highlighted', fontFamily: 'Source Code Pro', isActive: true }
    }
};
// Current font configuration (this gets updated by the admin)
export let currentFonts = { ...defaultFonts };
// Function to update fonts (called by FontManager)
export function updateFonts(newFonts) {
    currentFonts = { ...newFonts };
    // Apply fonts to the DOM immediately
    applyFontsToDOM(newFonts);
    // Save to localStorage for persistence
    localStorage.setItem('website-fonts', JSON.stringify(newFonts));
}
// Function to reset fonts to defaults
export function resetFonts() {
    currentFonts = { ...defaultFonts };
    applyFontsToDOM(defaultFonts);
    localStorage.removeItem('website-fonts');
}
// Function to load fonts from localStorage on page load
export function loadSavedFonts() {
    const saved = localStorage.getItem('website-fonts');
    if (saved) {
        try {
            const parsed = JSON.parse(saved);
            currentFonts = { ...parsed };
            applyFontsToDOM(parsed);
        }
        catch (error) {
            console.error('Failed to load saved fonts:', error);
            currentFonts = { ...defaultFonts };
        }
    }
}
// Function to get font for a specific component and element type
export function getFont(componentId, elementType) {
    const component = currentFonts[componentId];
    if (component && component[elementType] && component[elementType].isActive) {
        return component[elementType].fontFamily;
    }
    return 'Inter'; // Default fallback
}
// Function to apply fonts to the DOM
function applyFontsToDOM(fonts) {
    console.log('Applying fonts to DOM:', fonts);
    let appliedCount = 0;
    // Comprehensive approach: apply fonts to ALL text elements on the page
    Object.entries(fonts).forEach(([componentId, elements]) => {
        Object.entries(elements).forEach(([elementType, setting]) => {
            if (setting.isActive) {
                console.log(`Applying ${setting.fontFamily} to ${elementType} elements for ${componentId}`);
                // Target elements based on their type
                let selectors = [];
                switch (elementType) {
                    case 'h1':
                    case 'h2':
                    case 'h3':
                    case 'h4':
                        selectors = [elementType];
                        break;
                    case 'p':
                        selectors = [elementType];
                        break;
                    case 'span':
                        selectors = [elementType];
                        break;
                    case 'li':
                        selectors = [elementType];
                        break;
                    case 'label':
                        selectors = [elementType];
                        break;
                    case 'button':
                        selectors = ['button', '.btn', '.button', '.cta'];
                        break;
                    case 'pill':
                        selectors = ['.pill', '.tag', '.badge', '[class*="pill"]', '[class*="tag"]', '[class*="badge"]'];
                        break;
                    case 'formField':
                        selectors = ['input', 'textarea', 'select'];
                        break;
                    case 'highlighted':
                        selectors = ['.handdrawn-highlight', '.highlight', '.highlighted'];
                        break;
                    default:
                        selectors = [elementType];
                }
                // Apply font to all matching elements
                selectors.forEach(selector => {
                    const allElements = document.querySelectorAll(selector);
                    allElements.forEach(element => {
                        const htmlElement = element;
                        // Check if this element is within a component we want to style
                        const shouldApplyFont = shouldApplyFontToElement(htmlElement, componentId, elementType);
                        if (shouldApplyFont) {
                            // Apply font with !important to override existing styles
                            const fontFamily = setting.fontFamily;
                            let fallbackFonts = '';
                            // Add appropriate fallbacks based on font type
                            if (fontFamily === 'Source Code Pro' || fontFamily === 'Courier New' || fontFamily === 'Monaco' || fontFamily === 'Consolas' || fontFamily === 'Menlo') {
                                fallbackFonts = 'monospace';
                            }
                            else if (fontFamily === 'DIN Condensed') {
                                fallbackFonts = 'Arial Narrow, system-ui, sans-serif';
                            }
                            else {
                                fallbackFonts = 'system-ui, sans-serif';
                            }
                            htmlElement.style.setProperty('font-family', `'${fontFamily}', ${fallbackFonts}`, 'important');
                            appliedCount++;
                        }
                    });
                });
            }
        });
    });
    console.log(`Fonts applied to ${appliedCount} elements`);
}
// Helper function to determine if we should apply a font to an element
function shouldApplyFontToElement(element, componentId, elementType) {
    // Always apply to elements with the right data-component
    if (element.closest(`[data-component="${componentId}"]`)) {
        return true;
    }
    // Apply to elements with component-specific classes
    const componentClasses = getComponentClasses(componentId);
    if (componentClasses.some(cls => element.classList.contains(cls) || element.closest(`.${cls}`))) {
        return true;
    }
    // Apply to general elements if they're not already styled
    if (elementType === 'h1' || elementType === 'h2' || elementType === 'h3' || elementType === 'h4') {
        return true; // Apply to all headings
    }
    if (elementType === 'p') {
        return true; // Apply to all paragraphs
    }
    if (elementType === 'span' && element.textContent && element.textContent.trim().length > 0) {
        return true; // Apply to all spans with text
    }
    return false;
}
// Helper function to get component-specific CSS classes
function getComponentClasses(componentId) {
    const classMap = {
        hero: ['hero', 'hero-section'],
        about: ['about', 'about-section'],
        contact: ['contact', 'contact-section'],
        footer: ['footer'],
        header: ['header'],
        logo: ['logo-section'],
        valueProp: ['value-prop', 'value-prop-section'],
        valueStick: ['value-stick'],
        imageLibrary: ['image-library'],
        testimonials: ['testimonials', 'testimonial-section'],
        metrics: ['metrics', 'metric-counter'],
        tubeMap: ['tube-map', 'tube-map-transition'],
        contactModal: ['contact-modal'],
        blog: ['blog', 'blog-page', 'blog-card', 'blog-post', 'blog-post-detail'],
        bookClub: ['book-club', 'book-club-page', 'book-card']
    };
    return classMap[componentId] || [];
}
// Initialize fonts when the module loads
if (typeof window !== 'undefined') {
    loadSavedFonts();
}
